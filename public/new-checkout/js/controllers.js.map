{"version":3,"sources":["UsersController.js","globalController.js","navController.js","cartController.js","couponsController.js","EmailsController.js","ProfilesController.js","ShippingController.js","PaymentsController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"controllers.js","sourcesContent":["myApp.controller('UsersController' , ['$scope' ,  '$location' , 'User', '$rootScope' , function ($scope , $location , User ,$rootScope ) {\n    /*Variables*/\n    angular.extend($scope , {\n        errorDiv : false,\n        errorMessages : []\n    });\n\n    angular.extend($scope , {\n       doLogin : function (loginForm) {\n           if (loginForm.$valid){\n               var usrObj = {\n                   email : $scope.login.email,\n                   password : $scope.login.password\n               };\n               $scope.formSubmited = false;\n               User.doLogin(usrObj);\n           }else{\n               $scope.formSubmited = true;\n           }\n       },\n        doRegister : function (registerForm) {\n            if (registerForm.$valid){\n                var usrObj = {\n                    email : $scope.register.email,\n                    name : $scope.register.name,\n                    last_name : $scope.register.last_name,\n                    password : $scope.register.password,\n                    password_confirmation : $scope.register.password_confirmation\n                };\n                $scope.formSubmited = false;\n                User.doRegister(usrObj);\n            }else{\n                $scope.formSubmited = true;\n            }\n        },\n        doLogout : function () {\n            User.doUserLogout();\n            $location.path('/cart');\n        },\n        showFormRegister : function () {\n            $rootScope.modalAnimate($rootScope.formLogin, $rootScope.formRegister);\n        },\n        showFormLogin : function () {\n            $rootScope.modalAnimate($rootScope.formRegister, $rootScope.formLogin);\n        },\n        closeModalLogin : function () {\n            $location.path('/cart');\n        }\n    });\n}]);\n","myApp.controller('globalController' , [\"$scope\" , \"User\", \"$rootScope\" , \"$location\" , \"Cart\", function ($scope , User , $rootScope , $location , Cart) {\n    $scope.global = {};\n    $scope.global.navUrl = 'new-checkout/templates/partials/nav.html';\n    $scope.global.stepUrl = 'new-checkout/templates/partials/steps.html';\n    $scope.global.footerUrl = 'new-checkout/templates/partials/footer.html';\n    $scope.global.resumeUrl = 'new-checkout/templates/partials/resume.html';\n    angular.extend($rootScope , {\n        user : User.getUserObject(),\n        carts : Cart.getItems(Cart.getCartId()),\n        shipping_methods : [],\n        ship : [],\n        payment_methods : [],\n    }); \n    \n    angular.extend($rootScope , {\n        'prev' : function (path) {\n            $location.path(path);\n        }\n    });\n\n    angular.extend($scope , {\n        nextStep : function (step) {\n            if(step == 'email'){\n              $rootScope.init();\n            }\n        },\n        checkActiveLink: function(routeLink) {\n            if(routeLink.indexOf($location.path()) !== -1) {\n                return 'active';\n            }\n        }\n    });\n}]);","myApp.controller(\"navController\" , [\"$scope\" , \"User\" , \"$location\" ,  function ($scope , User , $location ) {\n    angular.extend($scope , {\n    \t       return $http({\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            url: baseUrl + '/carts/' + cartId + '/items?client_secret='  + client_secret + '&client_id=' + client_id,\n            method: \"GET\",\n        }).then(function(response) {\n           $rootScope.carts = response.data.data;\n           $rootScope.shopData = $rootScope.carts.shop.data;\n           console.log( $rootScope.shopData);\n        }).catch(function(response) {\n            console.log(response);\n        }).finally(function() {});\n    };\n       doLogout : function () {\n           User.doUserLogout();\n           $location.path('/cart');\n           $scope.user = false;\n       },\n    });\n\n}]);","myApp.controller(\"cartController\" , [ \"$scope\" , 'Cart' , \"User\" , \"$location\" , \"$rootScope\" , function ($scope ,Cart , User , $location , $rootScope) {\n    angular.extend($scope , {\n        cartId :   Cart.getCartId()\n    });\n\n    angular.extend($scope , {\n        remove : function (item) {\n            Cart.deleteItem($scope.cartId , item);\n        },\n        update : function (item ) {\n            Cart.updateItem($scope.cartId , item );   \n        },\n        next : function () {\n            if (User.getUserObject()){\n                var client = $rootScope.carts.order.data.client;\n                if (client.first_name && client.last_name && client.phone && client.identification)\n                {\n                    $location.path('/shipping');\n                }else{\n                    $location.path('/profile');\n                }\n            }else{\n                alert('Debes Registrarte o Iniciar Sesion');\n            }\n        }\n    });\n}]);","myApp.controller(\"couponController\" , [ \"$scope\"  , \"Coupon\" , function ($scope , Coupon) {\n    $scope.coupon = {};\n    angular.extend($scope , {\n        'useCoupon' : function () {\n            Coupon.useCoupon($scope.coupon.code);\n        }\n    });\n}]);","myApp.controller(\"emailController\" , [\"$scope\" , \"Email\" , \"$location\" , \"User\" , function ($scope , Email , $location , User ) {\n    \n    /*METHODS*/\n    if (User.getUserObject()){\n        $location.path('/profile');\n    }\n\n    angular.extend($scope , {\n        sendEmail : function (emailForm) {\n            if (emailForm.$valid){\n                $scope.formSubmited = false;\n                Email.doEmail($scope.email);\n            }else{\n                $scope.formSubmited = true;\n            }\n        }\n    });\n    \n}]);\n","myApp.controller(\"profileController\" , [ \"$scope\", \"$rootScope\" , \"Profile\", function ($scope , $rootScope , Profile ) {\n    \n    angular.extend($scope , {\n       'sendDataClient' : function () {\n           var usrObject = {\n               'name' : $rootScope.carts.order.data.client.first_name,\n               'last_name' : $rootScope.carts.order.data.client.last_name,\n               'phone' : $rootScope.carts.order.data.client.phone.toString(),\n               'identification' : $rootScope.carts.order.data.client.identification.toString()\n           };\n           Profile.updateData(usrObject);\n       } \n    });\n\n}]);","myApp.controller(\"shippingController\" , [\"$scope\" , \"Shipping\" , \"$location\" , \"$rootScope\",   function ($scope , Shipping  , $location , $rootScope) {\n\n    /*METHODS*/\n    angular.extend($scope , {\n        'newAddress' : false,\n        'address' : {}\n    });\n    $rootScope.states.defaultState = {'id' : 710 , 'name' : 'Distrito Capital de Bogot√°'};\n\n    angular.extend($scope , {\n        'goToPay' : function () {\n            if($rootScope.carts.shippingAddress.data._id){\n                var ordObject = {\n                    'shipping_address_id'  : $rootScope.carts.shippingAddress.data._id\n                };\n                Shipping.assignShipping(ordObject)\n                $location.path('/payment');\n            }else{\n                if(!$rootScope.carts.shippingMethod.data._id){\n                    alert('Escoge un metodo de pago');\n                }else{\n                    alert('Escoge una direccion');\n                }\n            }\n        },\n       'getAddresses' : function () {\n           Shipping.getAddresses();\n       },\n        'getShippingMethods' : function () {\n            Shipping.getShippingMethod();\n        },\n        'addressCreate' : function () {\n           $scope.newAddress = !$scope.newAddress;\n        },\n        'getStates' : function () {\n            Shipping.getStates();\n        },\n        'changeState' : function () {\n            Shipping.getCities($rootScope.states.defaultState.id);\n        },\n        'doAddress' : function () {\n            var addrObject = {\n              'name'  : $scope.address.name,\n              'street' : $scope.address.street,\n              'complement' : $scope.address.complement,\n              'country_id' : 50,\n              'state_id' : $scope.states.defaultState.id,\n              'city_id' : $scope.defaultCity.id,\n              'receiverName' : $rootScope.states.defaultState.id\n            };\n            Shipping.create(addrObject).then(function () {\n                $scope.addressCreate();\n            });\n        },\n        'changeShipping' : function () {\n            var ordObject = {\n              'shipping_method_id'  : $rootScope.carts.shippingMethod.data._id\n            };\n            Shipping.doShippingMethod(ordObject);\n        }\n    });\n\n    /*VARIABLES*/\n    $scope.getStates();\n    $scope.getAddresses();\n    $scope.getShippingMethods();\n}]);","myApp.controller(\"paymentController\" , [\"$scope\" , \"Payment\" , \"$location\" , \"$rootScope\",   function ($scope , Payment  , $location , $rootScope) {\n    Payment.getPaymentMethod();\n\n    $scope.doPayment = function (method) {\n        Payment.doPayment('/'+method);\n    }\n}]);"]}