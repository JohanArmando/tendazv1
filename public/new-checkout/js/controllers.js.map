{"version":3,"sources":["UsersController.js","globalController.js","navController.js","cartController.js","couponsController.js","EmailsController.js","ProfilesController.js","ShippingController.js","PaymentsController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"controllers.js","sourcesContent":["myApp.controller('UsersController' , ['$scope' ,  '$location' , 'User', '$rootScope' , function ($scope , $location , User ,$rootScope ) {\r\n    /*Variables*/\r\n    angular.extend($scope , {\r\n        errorDiv : false,\r\n        errorMessages : []\r\n    });\r\n\r\n    angular.extend($scope , {\r\n       doLogin : function (loginForm) {\r\n           if (loginForm.$valid){\r\n               var usrObj = {\r\n                   email : $scope.login.email,\r\n                   password : $scope.login.password\r\n               };\r\n               $scope.formSubmited = false;\r\n               User.doLogin(usrObj);\r\n           }else{\r\n               $scope.formSubmited = true;\r\n           }\r\n       },\r\n        doRegister : function (registerForm) {\r\n            if (registerForm.$valid){\r\n                var usrObj = {\r\n                    email : $scope.register.email,\r\n                    name : $scope.register.name,\r\n                    last_name : $scope.register.last_name,\r\n                    password : $scope.register.password,\r\n                    password_confirmation : $scope.register.password_confirmation\r\n                };\r\n                $scope.formSubmited = false;\r\n                User.doRegister(usrObj);\r\n            }else{\r\n                $scope.formSubmited = true;\r\n            }\r\n        },\r\n        doLogout : function () {\r\n            User.doUserLogout();\r\n            $location.path('/cart');\r\n        },\r\n        showFormRegister : function () {\r\n            $rootScope.modalAnimate($rootScope.formLogin, $rootScope.formRegister);\r\n        },\r\n        showFormLogin : function () {\r\n            $rootScope.modalAnimate($rootScope.formRegister, $rootScope.formLogin);\r\n        },\r\n        closeModalLogin : function () {\r\n            $location.path('/cart');\r\n        }\r\n    });\r\n}]);\r\n","myApp.controller('globalController' , [\"$scope\" , \"User\", \"$rootScope\" , \"$location\" , \"Cart\", function ($scope , User , $rootScope , $location , Cart) {\r\n    $scope.global = {};\r\n    $scope.global.navUrl = 'new-checkout/templates/partials/nav.html';\r\n    $scope.global.stepUrl = 'new-checkout/templates/partials/steps.html';\r\n    $scope.global.footerUrl = 'new-checkout/templates/partials/footer.html';\r\n    $scope.global.resumeUrl = 'new-checkout/templates/partials/resume.html';\r\n    angular.extend($rootScope , {\r\n        user : User.getUserObject(),\r\n        carts : Cart.getItems(Cart.getCartId()),\r\n        shipping_methods : [],\r\n        ship : [],\r\n        payment_methods : [],\r\n    }); \r\n    \r\n    angular.extend($rootScope , {\r\n        'prev' : function (path) {\r\n            $location.path(path);\r\n        }\r\n    });\r\n\r\n    angular.extend($scope , {\r\n        nextStep : function (step) {\r\n            if(step == 'email'){\r\n              $rootScope.init();\r\n            }\r\n        },\r\n        checkActiveLink: function(routeLink) {\r\n            if(routeLink.indexOf($location.path()) !== -1) {\r\n                return 'active';\r\n            }\r\n        }\r\n    });\r\n}]);","myApp.controller(\"navController\" , [\"$scope\" , \"User\" , \"$location\" ,  function ($scope , User , $location ) {\r\n    angular.extend($scope , {\r\n       doLogout : function () {\r\n           User.doUserLogout();\r\n           $location.path('/cart');\r\n           $scope.user = false;\r\n       },\r\n    });\r\n\r\n}]);","myApp.controller(\"cartController\" , [ \"$scope\" , 'Cart' , \"User\" , \"$location\" , \"$rootScope\" , function ($scope ,Cart , User , $location , $rootScope) {\r\n    angular.extend($scope , {\r\n        cartId :   Cart.getCartId()\r\n    });\r\n\r\n    angular.extend($scope , {\r\n        remove : function (item) {\r\n            Cart.deleteItem($scope.cartId , item);\r\n        },\r\n        update : function (item ) {\r\n            Cart.updateItem($scope.cartId , item );   \r\n        },\r\n        next : function () {\r\n            if (User.getUserObject()){\r\n                var client = $rootScope.carts.order.data.client;\r\n                if (client.first_name && client.last_name && client.phone && client.identification)\r\n                {\r\n                    $location.path('/shipping');\r\n                }else{\r\n                    $location.path('/profile');\r\n                }\r\n            }else{\r\n                alert('Debes Registrarte o Iniciar Sesion');\r\n            }\r\n        }\r\n    });\r\n}]);","myApp.controller(\"couponController\" , [ \"$scope\"  , \"Coupon\" , function ($scope , Coupon) {\r\n    $scope.coupon = {};\r\n    angular.extend($scope , {\r\n        'useCoupon' : function () {\r\n            Coupon.useCoupon($scope.coupon.code);\r\n        }\r\n    });\r\n}]);","myApp.controller(\"emailController\" , [\"$scope\" , \"Email\" , \"$location\" , \"User\" , function ($scope , Email , $location , User ) {\r\n    \r\n    /*METHODS*/\r\n    if (User.getUserObject()){\r\n        $location.path('/profile');\r\n    }\r\n\r\n    angular.extend($scope , {\r\n        sendEmail : function (emailForm) {\r\n            if (emailForm.$valid){\r\n                $scope.formSubmited = false;\r\n                Email.doEmail($scope.email);\r\n            }else{\r\n                $scope.formSubmited = true;\r\n            }\r\n        }\r\n    });\r\n    \r\n}]);\r\n","myApp.controller(\"profileController\" , [ \"$scope\", \"$rootScope\" , \"Profile\", function ($scope , $rootScope , Profile ) {\r\n    \r\n    angular.extend($scope , {\r\n       'sendDataClient' : function () {\r\n           var usrObject = {\r\n               'name' : $rootScope.carts.order.data.client.first_name,\r\n               'last_name' : $rootScope.carts.order.data.client.last_name,\r\n               'phone' : $rootScope.carts.order.data.client.phone.toString(),\r\n               'identification' : $rootScope.carts.order.data.client.identification.toString()\r\n           };\r\n           Profile.updateData(usrObject);\r\n       } \r\n    });\r\n\r\n}]);","myApp.controller(\"shippingController\" , [\"$scope\" , \"Shipping\" , \"$location\" , \"$rootScope\",   function ($scope , Shipping  , $location , $rootScope) {\r\n\r\n    /*METHODS*/\r\n    angular.extend($scope , {\r\n        'newAddress' : false,\r\n        'address' : {}\r\n    });\r\n    $rootScope.states.defaultState = {'id' : 710 , 'name' : 'Distrito Capital de Bogot√°'};\r\n\r\n    angular.extend($scope , {\r\n        'goToPay' : function () {\r\n            if($rootScope.carts.shippingAddress.data._id){\r\n                var ordObject = {\r\n                    'shipping_address_id'  : $rootScope.carts.shippingAddress.data._id\r\n                };\r\n                Shipping.assignShipping(ordObject)\r\n                $location.path('/payment');\r\n            }else{\r\n                if(!$rootScope.carts.shippingMethod.data._id){\r\n                    alert('Escoge un metodo de pago');\r\n                }else{\r\n                    alert('Escoge una direccion');\r\n                }\r\n            }\r\n        },\r\n       'getAddresses' : function () {\r\n           Shipping.getAddresses();\r\n       },\r\n        'getShippingMethods' : function () {\r\n            Shipping.getShippingMethod();\r\n        },\r\n        'addressCreate' : function () {\r\n           $scope.newAddress = !$scope.newAddress;\r\n        },\r\n        'getStates' : function () {\r\n            Shipping.getStates();\r\n        },\r\n        'changeState' : function () {\r\n            Shipping.getCities($rootScope.states.defaultState.id);\r\n        },\r\n        'doAddress' : function () {\r\n            var addrObject = {\r\n              'name'  : $scope.address.name,\r\n              'street' : $scope.address.street,\r\n              'complement' : $scope.address.complement,\r\n              'country_id' : 50,\r\n              'state_id' : $scope.states.defaultState.id,\r\n              'city_id' : $scope.defaultCity.id,\r\n              'receiverName' : $rootScope.states.defaultState.id\r\n            };\r\n            Shipping.create(addrObject).then(function () {\r\n                $scope.addressCreate();\r\n            });\r\n        },\r\n        'changeShipping' : function () {\r\n            var ordObject = {\r\n              'shipping_method_id'  : $rootScope.carts.shippingMethod.data._id\r\n            };\r\n            Shipping.doShippingMethod(ordObject);\r\n        }\r\n    });\r\n\r\n    /*VARIABLES*/\r\n    $scope.getStates();\r\n    $scope.getAddresses();\r\n    $scope.getShippingMethods();\r\n}]);","myApp.controller(\"paymentController\" , [\"$scope\" , \"Payment\" , \"$location\" , \"$rootScope\",   function ($scope , Payment  , $location , $rootScope) {\r\n    Payment.getPaymentMethod();\r\n\r\n    $scope.doPayment = function (method) {\r\n        Payment.doPayment('/'+method);\r\n    }\r\n}]);"]}