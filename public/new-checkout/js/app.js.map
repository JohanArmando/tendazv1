{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var myApp =  angular.module('checkout' , ['ngRoute' , 'ngCookies']);\r\n\r\nmyApp.config(['$routeProvider' ,\r\n    function ($routeProvider) {\r\n        $routeProvider.when('/cart' , {\r\n            templateUrl : \"new-checkout/templates/steps/cart.html\",\r\n            controller : \"cartController\"\r\n        });\r\n\r\n        $routeProvider.when('/email' , {\r\n            templateUrl : \"new-checkout/templates/steps/email.html\",\r\n            controller : \"emailController\",\r\n            authenticated : true\r\n        });\r\n\r\n        $routeProvider.when('/profile' , {\r\n            templateUrl : \"new-checkout/templates/steps/profile.html\",\r\n            controller : \"profileController\",\r\n            authenticated : true,\r\n            cart : true\r\n        });\r\n\r\n        $routeProvider.when('/shipping' , {\r\n            templateUrl :  \"new-checkout/templates/steps/shipping.html\",\r\n            controller : \"shippingController\",\r\n            authenticated : true,\r\n            cart : true,\r\n            profile : true\r\n        });\r\n\r\n        $routeProvider.when('/payment' , {\r\n            templateUrl : \"new-checkout/templates/steps/payment.html\",\r\n            controller : \"paymentController\",\r\n            authenticated : true,\r\n            cart : true,\r\n            profile : true,\r\n            shipping : true\r\n        });\r\n        \r\n        $routeProvider.otherwise('/cart');\r\n    }\r\n]);\r\n\r\nmyApp.run([\"$rootScope\", \"$location\", 'User', \"Cart\", \"Profile\",\r\n\r\n    function($rootScope, $location, User, Cart , Profile) {\r\n        /*GLOBAL VARIABLES*/\r\n        angular.extend($rootScope , {\r\n            formLogin : $('#login-form'),\r\n            formLost  :   $('#lost-form'),\r\n            formRegister : $('#register-form'),\r\n            divForms : $('#div-forms'),\r\n            modalAnimateTime : 300,\r\n            msgAnimateTime : 150,\r\n            msgShowTime : 2000,\r\n            states : {}\r\n        });\r\n        /*Global Methods*/\r\n        angular.extend($rootScope , {\r\n            returnStep : function () {\r\n               $location.path('/profile');\r\n            },\r\n            modalAnimate : function ($oldForm, $newForm) {\r\n                $('.bg-danger').html('');\r\n                $('.bg-danger').addClass('hidden');\r\n                var $oldH = $($oldForm.selector).height();\r\n                var $newH = $($newForm.selector).height();\r\n                $($rootScope.divForms.selector).css(\"height\",$oldH);\r\n                $($oldForm.selector).fadeToggle($rootScope.modalAnimateTime, function(){\r\n                    $($rootScope.divForms.selector).animate({height: $newH}, $rootScope.modalAnimateTime, function(){\r\n                        $($newForm.selector).fadeToggle($rootScope.modalAnimateTime);\r\n                    });\r\n                });\r\n            },\r\n            init : function () {\r\n                if($rootScope.carts){\r\n                    $location.path('/cart');\r\n                }\r\n                if (!$rootScope.user){\r\n                    if ($rootScope.carts.customer.data._id == undefined){\r\n                        $location.path('/email');\r\n                    }else{\r\n                        var user = $rootScope.carts.customer.data;\r\n                        if (user.personal_info.first_name && user.personal_info.last_name &&  user.personal_info.phone &&  user.personal_info.identification &&  user.email){\r\n                            $location.path('/shipping');\r\n                        }else{\r\n                            $location.path('/profile');\r\n                        }\r\n                    }\r\n                }else{\r\n                    $location.path('/profile');\r\n                }\r\n            }\r\n        });\r\n        $rootScope.$on(\"$routeChangeStart\",\r\n            function(event, next, current) {\r\n                if (next.$$route.authenticated) {\r\n                    if (!User.getAuthStatus()) {\r\n                        $location.path('/cart');\r\n                        $('#sign-up').modal('toggle');\r\n                        $('.bg-danger').html('Por favor registrate o inicia sesion');\r\n                        $('.bg-danger').removeClass('hidden');\r\n                    }\r\n                }\r\n                if(next.$$route.cart){\r\n                    if (!Cart.getCartId()) {\r\n                            $location.path('/cart');\r\n                    }\r\n                }\r\n\r\n                if(next.$$route.profile){\r\n                    if(Profile.getData() == null  || Profile.getData().first_name || Profile.getData().name  || Profile.getData().phone  || Profile.getData().identification ){\r\n                        $location.path('/profile');\r\n                    }\r\n                }\r\n            });\r\n    }\r\n]);\r\nmyApp.directive('convertToString', function() {\r\n    return {\r\n        require: 'ngModel',\r\n        link: function(scope, element, attrs, ngModel) {\r\n            ngModel.$parsers.push(function(val) {\r\n                return parseInt(val, 10);\r\n            });\r\n            ngModel.$formatters.push(function(val) {\r\n                return '' + val;\r\n            });\r\n        }\r\n    };\r\n});\r\n"]}