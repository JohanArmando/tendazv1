{"version":3,"sources":["/resources/assets/js/checkout/app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var myApp =  angular.module('checkout' , ['ngRoute' , 'ngCookies']);\n\nmyApp.config(['$routeProvider' ,\n    function ($routeProvider) {\n        $routeProvider.when('/cart' , {\n            templateUrl : \"new-checkout/templates/steps/cart.html\",\n            controller : \"cartController\"\n        });\n\n        $routeProvider.when('/email' , {\n            templateUrl : \"new-checkout/templates/steps/email.html\",\n            controller : \"emailController\",\n            authenticated : true\n        });\n\n        $routeProvider.when('/profile' , {\n            templateUrl : \"new-checkout/templates/steps/profile.html\",\n            controller : \"profileController\",\n            authenticated : true,\n            cart : true\n        });\n\n        $routeProvider.when('/shipping' , {\n            templateUrl :  \"new-checkout/templates/steps/shipping.html\",\n            controller : \"shippingController\",\n            authenticated : true,\n            cart : true,\n            profile : true\n        });\n\n        $routeProvider.when('/payment' , {\n            templateUrl : \"new-checkout/templates/steps/payment.html\",\n            controller : \"paymentController\",\n            authenticated : true,\n            cart : true,\n            profile : true,\n            shipping : true\n        });\n        \n        $routeProvider.otherwise('/cart');\n    }\n]);\n\nmyApp.run([\"$rootScope\", \"$location\", 'User', \"Cart\", \"Profile\",\n\n    function($rootScope, $location, User, Cart , Profile) {\n        /*GLOBAL VARIABLES*/\n        angular.extend($rootScope , {\n            formLogin : $('#login-form'),\n            formLost  :   $('#lost-form'),\n            formRegister : $('#register-form'),\n            divForms : $('#div-forms'),\n            modalAnimateTime : 300,\n            msgAnimateTime : 150,\n            msgShowTime : 2000,\n            states : {}\n        });\n        /*Global Methods*/\n        angular.extend($rootScope , {\n            returnStep : function () {\n               $location.path('/profile');\n            },\n            modalAnimate : function ($oldForm, $newForm) {\n                $('.bg-danger').html('');\n                $('.bg-danger').addClass('hidden');\n                var $oldH = $($oldForm.selector).height();\n                var $newH = $($newForm.selector).height();\n                $($rootScope.divForms.selector).css(\"height\",$oldH);\n                $($oldForm.selector).fadeToggle($rootScope.modalAnimateTime, function(){\n                    $($rootScope.divForms.selector).animate({height: $newH}, $rootScope.modalAnimateTime, function(){\n                        $($newForm.selector).fadeToggle($rootScope.modalAnimateTime);\n                    });\n                });\n            },\n            init : function () {\n                if($rootScope.carts){\n                    $location.path('/cart');\n                }\n                if (!$rootScope.user){\n                    if ($rootScope.carts.customer.data._id == undefined){\n                        $location.path('/email');\n                    }else{\n                        var user = $rootScope.carts.customer.data;\n                        if (user.personal_info.first_name && user.personal_info.last_name &&  user.personal_info.phone &&  user.personal_info.identification &&  user.email){\n                            $location.path('/shipping');\n                        }else{\n                            $location.path('/profile');\n                        }\n                    }\n                }else{\n                    $location.path('/profile');\n                }\n            }\n        });\n        $rootScope.$on(\"$routeChangeStart\",\n            function(event, next, current) {\n                if (next.$$route.authenticated) {\n                    if (!User.getAuthStatus()) {\n                        $location.path('/cart');\n                        $('#sign-up').modal('toggle');\n                        $('.bg-danger').html('Por favor registrate o inicia sesion');\n                        $('.bg-danger').removeClass('hidden');\n                    }\n                }\n                if(next.$$route.cart){\n                    if (!Cart.getCartId()) {\n                            $location.path('/cart');\n                    }\n                }\n\n                if(next.$$route.profile){\n                    if(Profile.getData() == null  || Profile.getData().first_name || Profile.getData().name  || Profile.getData().phone  || Profile.getData().identification ){\n                        $location.path('/profile');\n                    }\n                }\n            });\n    }\n]);\nmyApp.directive('convertToString', function() {\n    return {\n        require: 'ngModel',\n        link: function(scope, element, attrs, ngModel) {\n            ngModel.$parsers.push(function(val) {\n                return parseInt(val, 10);\n            });\n            ngModel.$formatters.push(function(val) {\n                return '' + val;\n            });\n        }\n    };\n});\n"]}