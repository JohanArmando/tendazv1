myApp.controller("UsersController",["$scope","$location","User","$rootScope",function(e,t,o,n){angular.extend(e,{errorDiv:!1,errorMessages:[]}),angular.extend(e,{doLogin:function(t){if(t.$valid){var n={email:e.login.email,password:e.login.password};e.formSubmited=!1,o.doLogin(n)}else e.formSubmited=!0},doRegister:function(t){if(t.$valid){var n={email:e.register.email,name:e.register.name,last_name:e.register.last_name,password:e.register.password,password_confirmation:e.register.password_confirmation};e.formSubmited=!1,o.doRegister(n)}else e.formSubmited=!0},doLogout:function(){o.doUserLogout(),t.path("/cart")},showFormRegister:function(){n.modalAnimate(n.formLogin,n.formRegister)},showFormLogin:function(){n.modalAnimate(n.formRegister,n.formLogin)},closeModalLogin:function(){t.path("/cart")}})}]),myApp.controller("globalController",["$scope","User","$rootScope","$location","Cart",function(e,t,o,n,a){e.global={},e.global.navUrl="new-checkout/templates/partials/nav.html",e.global.stepUrl="new-checkout/templates/partials/steps.html",e.global.footerUrl="new-checkout/templates/partials/footer.html",e.global.resumeUrl="new-checkout/templates/partials/resume.html",angular.extend(o,{user:t.getUserObject(),carts:a.getItems(a.getCartId()),shipping_methods:[],ship:[],payment_methods:[]}),angular.extend(o,{prev:function(e){n.path(e)}}),angular.extend(e,{nextStep:function(e){"email"==e&&o.init()},checkActiveLink:function(e){if(e.indexOf(n.path())!==-1)return"active"}})}]),myApp.controller("navController",["$scope","User","$location",function(e,t,o){angular.extend(e,{doLogout:function(){t.doUserLogout(),o.path("/cart"),e.user=!1}})}]),myApp.controller("cartController",["$scope","Cart","User","$location","$rootScope",function(e,t,o,n,a){angular.extend(e,{cartId:t.getCartId()}),angular.extend(e,{remove:function(o){t.deleteItem(e.cartId,o)},update:function(o){t.updateItem(e.cartId,o)},next:function(){if(o.getUserObject()){var e=a.carts.order.data.client;e.first_name&&e.last_name&&e.phone&&e.identification?n.path("/shipping"):n.path("/profile")}else alert("Debes Registrarte o Iniciar Sesion")}})}]),myApp.controller("couponController",["$scope","Coupon",function(e,t){e.coupon={},angular.extend(e,{useCoupon:function(){t.useCoupon(e.coupon.code)}})}]),myApp.controller("emailController",["$scope","Email","$location","User",function(e,t,o,n){n.getUserObject()&&o.path("/profile"),angular.extend(e,{sendEmail:function(o){o.$valid?(e.formSubmited=!1,t.doEmail(e.email)):e.formSubmited=!0}})}]),myApp.controller("profileController",["$scope","$rootScope","Profile",function(e,t,o){angular.extend(e,{sendDataClient:function(){var e={name:t.carts.order.data.client.first_name,last_name:t.carts.order.data.client.last_name,phone:t.carts.order.data.client.phone.toString(),identification:t.carts.order.data.client.identification.toString()};o.updateData(e)}})}]),myApp.controller("shippingController",["$scope","Shipping","$location","$rootScope",function(e,t,o,n){angular.extend(e,{newAddress:!1,address:{}}),n.states.defaultState={id:710,name:"Distrito Capital de Bogot√°"},angular.extend(e,{goToPay:function(){if(n.carts.shippingAddress.data._id){var e={shipping_address_id:n.carts.shippingAddress.data._id};t.assignShipping(e),o.path("/payment")}else n.carts.shippingMethod.data._id?alert("Escoge una direccion"):alert("Escoge un metodo de pago")},getAddresses:function(){t.getAddresses()},getShippingMethods:function(){t.getShippingMethod()},addressCreate:function(){e.newAddress=!e.newAddress},getStates:function(){t.getStates()},changeState:function(){t.getCities(n.states.defaultState.id)},doAddress:function(){var o={name:e.address.name,street:e.address.street,complement:e.address.complement,country_id:50,state_id:e.states.defaultState.id,city_id:e.defaultCity.id,receiverName:n.states.defaultState.id};t.create(o).then(function(){e.addressCreate()})},changeShipping:function(){var e={shipping_method_id:n.carts.shippingMethod.data._id};t.doShippingMethod(e)}}),e.getStates(),e.getAddresses(),e.getShippingMethods()}]),myApp.controller("paymentController",["$scope","Payment","$location","$rootScope",function(e,t,o,n){t.getPaymentMethod(),e.doPayment=function(e){t.doPayment("/"+e)}}]);